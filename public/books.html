<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="/css/books.css">
    <link rel="stylesheet" href="./css/chatbot.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
    <!--  font awesome  -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
        integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">

    <title>Books</title>
</head>

<body>
    <section class="header">
        <nav>
            <h2 style="color: white;">Campusopedia</h2>
            <div class="nav-links" id="navLinks">

                <span class="icon" onclick="hidemenu()">&#10005;</span>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="attendance.html">Attendance</a></li>
                    <li><a href="books.html">Explore Our Library</a></li>
                    <li id="loginLink"><a href="/login.html">Login</a></li>
                    <!-- <li id="logoutLink" style="display: none;"><a href="#" onclick="logout()">Logout</a></li> -->
                </ul>
            </div>
            <span class="icon" onclick="showmenu()">&#9776;</span>
        </nav>
        <div class="searchbox">
            <input type="text" id="searchInput" placeholder="Search anything..." class="search__box">
            <i class="fas fa-search search__icon" id="icon" onclick="searchBooks()"></i>
        </div>

    </section>

    <!-- Rest of your HTML content -->

    <script>

        function toggleShow() {
            var el = document.getElementById("box");
            el.classList.toggle("show");
        }

        // Function to handle search functionality
        function searchBooks() {
            // Get the search query from the input field
            const searchQuery = document.getElementById('searchInput').value.toLowerCase();

            // Get all book titles
            const bookTitles = document.querySelectorAll('.book .title');

            // Loop through each book title and check if it matches the search query
            bookTitles.forEach(title => {
                const bookTitle = title.innerText.toLowerCase();
                const book = title.closest('.book');
                if (bookTitle.includes(searchQuery)) {
                    book.style.display = 'block'; // Show the book if it matches the search query
                } else {
                    book.style.display = 'none'; // Hide the book if it doesn't match the search query
                }
            });
        }

        window.onload = function () {
            console.log('Window loaded');
            const loggedIn = getCookie('loggedIn');

            if (!loggedIn) {
                // User is not logged in, redirect to the login page
                window.location.href = '/login.html';
            } else {
                // User is logged in, show the home page
                const loginLink = document.getElementById('loginLink');
                createLogoutButton();
                loginLink.style.display = 'none';
            }
        };

        function createLogoutButton() {
            const logoutLink = document.createElement('li');
            logoutLink.id = 'logoutLinkDynamic';
            logoutLink.innerHTML = '<a href="#" onclick="logout()">Logout</a>';

            const navLinks = document.querySelector('.nav-links ul');
            navLinks.appendChild(logoutLink);
        }

        function getCookie(name) {
            const value = `; ${document.cookie}`;
            const parts = value.split(`; ${name}=`);
            if (parts.length === 2) return parts.pop().split(';').shift();
        }

        function logout() {
            // Clear the loggedIn cookie
            document.cookie = 'loggedIn=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';

            // Redirect to the login page
            window.location.href = '/login.html';
        }
    </script>
    <div id="large-th">
        <div class="container">
            <h1 style="color: rgb(13, 13, 13);">A list of books</h1>
            <p style="text-align: center;">~ Click on the books to read ðŸ“–</p>
            <br>
            <div class="choose">
                <a href="#list-th"><i class="fa fa-th-list" aria-hidden="true"></i></a>
                <a href="#large-th"><i class="fa fa-th-large" aria-hidden="true"></i></a>
            </div>
            <div style="margin-top: 3rem;" id="list-th">
                <div class="book read">
                    <div class="cover">
                        <a href="https://www.planetebook.com/free-ebooks/frankenstein.pdf">
                            <img
                                src="https://s-media-cache-ak0.pinimg.com/564x/f9/8e/2d/f98e2d661445620266c0855d418aab71.jpg">
                        </a>
                    </div>
                    <div class="description">
                        <p class="title">Frankenstein<br>
                            <span class="author">Mary Shelley</span>
                            <!-- <br> -->
                            <!-- <button style="background-color: lightblue; height: 1.5rem; border-radius: 5px; width: 2rem;">Read</button> -->
                        </p>
                    </div>

                </div>
                <div class="book read">
                    <div class="cover">
                        <a
                            href="https://ia801307.us.archive.org/19/items/littleprincessbe00burn/littleprincessbe00burn.pdf">
                            <img src="https://alysbcohen.files.wordpress.com/2015/01/little-princess-book-cover.jpg">
                        </a>
                    </div>
                    <div class="description">
                        <p class="title">A Little Princess<br>
                            <span class="author">Frances Hodgson Burnett</span>
                        </p>
                    </div>
                </div>
                <div class="book unread">
                    <div class="cover">
                        <a href="https://tile.loc.gov/storage-services//service/gdc/calbk/197.pdf">
                            <img
                                src="http://www.publishersweekly.com/images/data/ARTICLE_PHOTO/photo/000/028/28129-1.JPG">
                        </a>
                    </div>
                    <div class="description">
                        <p class="title">Roughing It</br>
                            <span class="author">Mark Twain</span>
                        </p>
                    </div>
                </div>
                <div class="book unread">
                    <div class="cover">
                        <a
                            href="https://www.academia.edu/42578584/PDF_Bird_By_Bird_Some_Instructions_On_Writing_And_Life_PdF">
                            <img src="http://talkingwriting.com//sites/default/files/Bird-by-Bird-image1.jpg">
                        </a>
                    </div>
                    <div class="description">
                        <p class="title">Bird By Bird</br>
                            <span class="author">Anne Lamott</span>
                        </p>
                    </div>
                </div>
                <div class="book read">
                    <div class="cover">
                        <a href="https://www.csun.edu/~rdavids/150sp09/150readings/Achebe_Girls_at_War.pdf">
                            <img src="http://d.gr-assets.com/books/1414348859l/23209971.jpg">
                        </a>
                    </div>
                    <div class="description">
                        <p class="title">Girl at War</br>
                            <span class="author">Sara Novic</span>
                        </p>
                    </div>
                </div>
                <div class="book read">
                    <div class="cover">
                        <a
                            href="https://ia801006.us.archive.org/13/items/OceanofPDF.comTheAlchemist/_OceanofPDF.com_The_Alchemist.pdf">
                            <img src="http://prodimage.images-bn.com/pimages/9780062315007_p0_v2_s192x300.jpg">
                        </a>
                    </div>
                    <div class="description">
                        <p class="title">The Alchemist</br>
                            <span class="author">Paulo Coelho</span>
                        </p>
                    </div>
                </div>
                <div class="book read">
                    <div class="cover">
                        <a
                            href="https://www.argentina.gob.ar/sites/default/files/anne_of_the_green_gables_montogomery.pdf">
                            <img src="https://images-na.ssl-images-amazon.com/images/I/71rtzg36RAL.jpg?w=640">
                        </a>
                    </div>
                    <div class="description">
                        <p class="title">Anne of Green Gables</br>
                            <span class="author">Lucy Maud Montgomery</span>
                        </p>
                    </div>
                </div>
                <div class="book read">
                    <div class="cover">
                        <a href="https://www.arvindguptatoys.com/arvindgupta/orwellanimalfarm.pdf">
                            <img src="https://m.media-amazon.com/images/I/71K9w4a5RGL._AC_UF1000,1000_QL80_.jpg">
                        </a>
                    </div>
                    <div class="description">
                        <p class="title">Animal Farm</br>
                            <span class="author">George Orwell</span>
                        </p>
                    </div>
                </div>

            </div>
        </div>
    </div>

     <!--   Chat Bot   -->
     <button class="chatbot__button">
        <span class="material-symbols-outlined">mode_comment</span>
        <span class="material-symbols-outlined">close</span>
    </button>

    <div class="chatbot">
        <div class="chatbot__header" style="height: 100px;">
            <h3 class="chatbox__title">Campusopedia</h3>
            <span class="material-symbols-outlined">close</span>
        </div>
        <ul class="chatbot__box">
            <li class="chatbot__chat incoming">
                <span class="material-symbols-outlined">smart_toy</span>
                <p>Hi there. How can I help you today?</p>
            </li>
            <li class="chatbot__chat outgoing">
                <!-- <p>...</p> -->
            </li>
        </ul>
        <form id="chatbotForm" action="/ask" method="POST"> <!-- Add action and method here -->
            <div class="chatbot__input-box">
                <textarea class="chatbot__textarea" name="message" placeholder="Enter a message..." required></textarea>
                <button style="cursor: pointer;" type="submit" id="send-btn" class="material-symbols-outlined">send</button>
                <!-- Change span to button and add type="submit" -->
            </div>
        </form>
    </div>

    <!--  chat bot finish  -->

    <script src="../public/javascript/main_script.js"></script>
    <script src="../public/javascript/login.js"></script>
    <script src="./chatbot.js"></script>

</body>

</html>